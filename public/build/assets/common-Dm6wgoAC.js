import{s as f}from"./show_toast-D6XsZeMw.js";import{m}from"./ajax-BLA7SV_z.js";import"./_commonjsHelpers-BosuxZz1.js";$(function(){$('input[data-is_required="1"], select[data-is_required="1"], textarea[data-is_required="1"]').attr("required",!0),$(document).on("click",".submitForm",function(){var e=$(this),i=e.data("targetform"),t=$("."+i),r=!0;const a=$(this).closest("form"),o=$("form").index(a),u=$("."+t.data("target_pulse")),c=t.data("target_pulse"),d=t.data("target_left_tab_pulse");if(t.find('[data-is_required="1"]').each(function(){$(this).val()?($(this).removeClass("error"),$(this).siblings(".error-message").hide()):(r=!1,$(this).addClass("error"),$(this).siblings(".error-message").text(translations.super.this_field_is_required).show())}),!r)return f(translations.super.please_fill_in_all_required_fields,"warning"),!1;var s=new FormData(t[0]);$("."+i).find(":input").each(function(){var n=this.name;s.has(n)||($(this).is(":checkbox")?s.append(n,$(this).is(":checked")?$(this).val():"no"):$(this).is(":radio")?$(this).is(":checked")&&s.append(n,$(this).val()):s.append(n,$(this).val()))}),s.append("action","save_update_data"),s.append("target_form",i),e.addClass("loader"),e.prop("disabled",!0),m("POST",window.commonAsset.ajax,s,function(n,l){if(e.prop("disabled",!1),e.removeClass("loader"),n)console.error(n);else{if(l.type=="error")return f(l.msg,l.type),!1;p(o,u),$("#"+d).length>0&&(g(d,c),h(d)),f(l.msg,l.type)}})}),$(document).on("click",".clickToUpload",function(){var e=$(this).data("target_file_input");$("#"+e).click()}),$(document).on("change",".imgUploaderInput",function(){var e=$(this),i=e.data("target_preview"),t=$("#"+i),r=e[0].files[0];if(r){var a=new FileReader;a.onload=function(o){t.find("img").attr("src",o.target.result).show(),t.find("span").hide()},a.readAsDataURL(r)}else t.find("img").attr("src","").hide(),t.find("span").show()})});function p(e,i){window.formChangeStates[e]=!1,i.removeClass("formChanged")}function h(e){$("#"+e).val().split(",").forEach(function(a){a!=""&&$("."+a).addClass("formChanged")})}function g(e,i){let t=$("#"+e),r=t.val(),a=r?r.split(","):[];a=a.filter(o=>o!==i),t.val(a.join(","))}
