import{s as n}from"./show_toast-D6XsZeMw.js";import{m as l}from"./ajax-BLA7SV_z.js";import{D as c}from"./dataTables-B9FWpZWP.js";import"./_commonjsHelpers-BosuxZz1.js";let m=new c("#currencyListTable",{responsive:!0,processing:!0,serverSide:!0,ajax:{url:window.commonAsset.ajax,type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf_token"]').attr("content")},data:function(e){e.action="load_currencies"}},order:[[0,"desc"]],columns:[{data:"curr_name"},{data:"curr_sign"},{data:"curr_value"},{data:"curr_default"},{data:"action"}]});function u(){m.ajax.reload()}$(function(){$(".modalCurrencyFormBtn").on("click",function(e){e.preventDefault();var r=$(this).data("currency_id");let a=$(this).data("bs-effect");$("#modalCurrencyForm").addClass(a),f(r)}),$("#modalCurrencySubmit").on("click",function(e){e.preventDefault();var r=!0,a=$(this),o=a.data("targetform"),d=$("."+o);if(d.find('[data-is_required="1"]').each(function(){$(this).val()?($(this).removeClass("error"),$(this).siblings(".error-message").hide()):(r=!1,$(this).addClass("error"),$(this).siblings(".error-message").text(translations.super.this_field_is_required).show())}),!r)return n(translations.super.please_fill_in_all_required_fields,"warning"),!1;var t=new FormData(d[0]);$("."+o).find(":input").each(function(){var i=this.name;t.has(i)||($(this).is(":checkbox")?t.append(i,$(this).is(":checked")?$(this).val():"no"):$(this).is(":radio")?$(this).is(":checked")&&t.append(i,$(this).val()):t.append(i,$(this).val()))}),t.append("action","save_update_data"),t.append("target_form",o),a.addClass("loader"),a.prop("disabled",!0),l("POST",window.commonAsset.ajax,t,function(i,s){if(a.prop("disabled",!1),a.removeClass("loader"),i)console.error(i);else{if(s.type=="error")return n(s.msg,s.type),!1;$("#modalCurrencyForm").modal("hide"),u(),n(s.msg,s.type)}})}),$("#modalCurrencyForm").on("hidden.bs.modal",function(){let e=$(this).attr("class").match(/(^|\s)effect-\S+/g);e&&(e=e[0].trim(),$(this).removeClass(e))})});function f(e){$("#modalCurrencySubmit").prop("disabled",!0);var r=new FormData;r.append("action","load_currency_create_edit_form"),r.append("currency_id",e),$("#modalCurrencyBody").html('<div class="text-center"><img src="../../../build/assets/images/svgs/loader.svg" alt=""></div>'),l("POST",window.commonAsset.ajax,r,function(a,o){h(a,o)})}function h(e,r){if($("#modalCurrencySubmit").prop("disabled",!1),e)console.error("Error:",e);else return r.type=="error"?(n(r.msg,"warning"),setTimeout(function(){$("#modalCurrencyForm").modal("hide")},500),!1):($("#modalCurrencyTitle").html(r.form_title),$("#modalCurrencySubmit").html(r.form_btn),$("#modalCurrencyBody").html(r.form_body),!0)}
